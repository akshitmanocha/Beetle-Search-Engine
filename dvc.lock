schema: '2.0'
stages:
  crawl:
    cmd: python src/ETL/website_crawler.py --limit 1
    deps:
    - path: data/seeds/seed_domains.txt
      hash: md5
      md5: 3e9950802e46d14ba4a4ee67704b8a62
      size: 191
    - path: src/ETL/website_crawler.py
      hash: md5
      md5: 80bd587ae1312d10628db5c60b92186e
      size: 2862
    params:
      params.yaml:
        ETL.crawler.max_depth: 2
        ETL.crawler.max_urls_per_seed: 1
        ETL.crawler.sleep_time: 0
    outs:
    - path: data/crawled_websites.txt
      hash: md5
      md5: 1dd254818bd67778a69eb01ee6455cd9
      size: 247
  download:
    cmd: python src/ETL/download_html.py
    deps:
    - path: data/crawled_websites.txt
      hash: md5
      md5: 1dd254818bd67778a69eb01ee6455cd9
      size: 247
    - path: src/ETL/download_html.py
      hash: md5
      md5: aeb1fad6d5193a2c9bcbd3f285443d87
      size: 3171
    params:
      params.yaml:
        ETL.downloader.max_workers: 16
    outs:
    - path: data/metadata
      hash: md5
      md5: 9704620066ed2848238f5dea80dbff1a.dir
      size: 1627
      nfiles: 10
    - path: data/raw
      hash: md5
      md5: 90faa312fa0cb897aa0d2a4df4299ac3.dir
      size: 3851274
      nfiles: 10
  parse:
    cmd: python src/ETL/parse.py
    deps:
    - path: data/metadata
      hash: md5
      md5: 9704620066ed2848238f5dea80dbff1a.dir
      size: 1627
      nfiles: 10
    - path: data/raw
      hash: md5
      md5: 90faa312fa0cb897aa0d2a4df4299ac3.dir
      size: 3851274
      nfiles: 10
    - path: src/ETL/parse.py
      hash: md5
      md5: 57fb94bd4ae975914168297f6f2ac4a5
      size: 7906
    params:
      params.yaml:
        ETL.parser.min_word_count: 100
    outs:
    - path: data/parsed
      hash: md5
      md5: 4a8909d53e75d57766cf2da913950271.dir
      size: 111068
      nfiles: 10
  label:
    cmd: python src/ETL/heuristic_label.py
    deps:
    - path: data/parsed
      hash: md5
      md5: 4a8909d53e75d57766cf2da913950271.dir
      size: 111068
      nfiles: 10
    - path: src/ETL/heuristic_label.py
      hash: md5
      md5: 7378f3c0d0c52bfdfa447b5ea1a6ae16
      size: 8321
    params:
      params.yaml:
        ETL.heuristic_labeling.ollama_model: granite3.3:2b
        ETL.heuristic_labeling.score_threshold: 5
    outs:
    - path: data/labels/weak.csv
      hash: md5
      md5: 4194aede6dcac2bdfd65b7eec39b7a90
      size: 3619
  filter:
    cmd: python src/ETL/filter_blogs.py
    deps:
    - path: data/labels/weak.csv
      hash: md5
      md5: 4194aede6dcac2bdfd65b7eec39b7a90
      size: 3619
    - path: data/parsed
      hash: md5
      md5: 4a8909d53e75d57766cf2da913950271.dir
      size: 111068
      nfiles: 10
    - path: src/ETL/filter_blogs.py
      hash: md5
      md5: c998351231ebe465dcc8f2b296f6837f
      size: 4217
    outs:
    - path: data/clean
      hash: md5
      md5: 10961b517b81fff3e41594975d47b794.dir
      size: 21543
      nfiles: 2
